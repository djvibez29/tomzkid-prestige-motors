{% extends "base.html" %}

{% block content %}

<div class="search-bar">
    <form method="get">
        <input type="text" name="search" placeholder="Search cars...">
        <select name="brand">
            <option value="">All Brands</option>
            {% for b in brands %}
            <option value="{{ b.id }}">{{ b.name }}</option>
            {% endfor %}
        </select>
        <button>Search</button>
    </form>
</div>

<div class="grid">

{% for car in cars %}
<div class="car-card">

    {% if car.images %}
        <img src="{{ url_for('static', filename='uploads/cars/' + car.images[0].filename) }}">
    {% else %}
        <div class="no-img">No Image</div>
    {% endif %}

    <h3>{{ car.title }}</h3>
    <p class="price">${{ "{:,}".format(car.price) }}</p>

    <div class="meta">
        {{ car.brand.name }} • {{ car.engine.name }} • {{ car.drivetrain.name }}
    </div>

</div>
{% endfor %}

</div>

{% endblock %}
